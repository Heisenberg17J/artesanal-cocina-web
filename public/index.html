<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocina Artesanal - Comida Casera con Amor</title>
    
    <!-- Tailwind CSS + DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* Estilos personalizados */
        :root {
            --color-primary: #D97757;
            --color-secondary: #F4A460;
            --color-accent: #8B4513;
            --color-warm: #FFF8DC;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        
        .hero-section {
            background: linear-gradient(135deg, rgba(217, 119, 87, 0.9), rgba(139, 69, 19, 0.8)),
                        url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200') center/cover;
            min-height: 90vh;
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .masonry {
            column-count: 3;
            column-gap: 1rem;
        }
        
        .masonry-item {
            break-inside: avoid;
            margin-bottom: 1rem;
        }
        
        @media (max-width: 768px) {
            .masonry {
                column-count: 2;
            }
        }
        
        @media (max-width: 480px) {
            .masonry {
                column-count: 1;
            }
        }
        
        .whatsapp-btn {
            background: #25D366;
            transition: all 0.3s ease;
        }
        
        .whatsapp-btn:hover {
            background: #128C7E;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-[#FFF8DC]">
    
    <!-- NAVBAR -->
    <div class="navbar bg-white shadow-lg sticky top-0 z-50">
        <div class="navbar-start">
            <div class="dropdown">
                <label tabindex="0" class="btn btn-ghost lg:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
                    </svg>
                </label>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#menu">Men√∫</a></li>
                    <li><a href="#galeria">Galer√≠a</a></li>
                    <li><a href="#promociones">Promociones</a></li>
                    <li><a href="#historia">Nuestra Historia</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </div>
            <a class="btn btn-ghost text-xl font-bold text-[#8B4513]" href="#inicio">
                üç≥ Cocina Artesanal
            </a>
        </div>
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#menu">Men√∫</a></li>
                <li><a href="#galeria">Galer√≠a</a></li>
                <li><a href="#promociones">Promociones</a></li>
                <li><a href="#historia">Nuestra Historia</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
        </div>
        <div class="navbar-end">
            <a href="https://wa.me/573001234567?text=Hola!%20Quiero%20hacer%20un%20pedido" 
               class="btn whatsapp-btn text-white" target="_blank">
                üì± WhatsApp
            </a>
        </div>
    </div>

    <!-- SECCI√ìN 1: HERO / INICIO -->
    <section id="inicio" class="hero-section flex items-center justify-center text-white">
        <div class="text-center px-4 max-w-4xl">
            <h1 class="text-5xl md:text-7xl font-bold mb-6 drop-shadow-lg">
                Sabor Casero, Amor de Familia
            </h1>
            <p class="text-xl md:text-2xl mb-8 font-light drop-shadow">
                Cada plato est√° preparado con ingredientes frescos y recetas transmitidas de generaci√≥n en generaci√≥n. 
                Disfruta de la aut√©ntica comida artesanal en la comodidad de tu hogar.
            </p>
            <a href="https://wa.me/573001234567?text=Hola!%20Quiero%20hacer%20un%20pedido" 
               class="btn btn-lg whatsapp-btn text-white text-xl px-8 py-4 rounded-full shadow-2xl" target="_blank">
                üõí Pedir Ahora por WhatsApp
            </a>
        </div>
    </section>

    <!-- SECCI√ìN 2: MEN√ö -->
    <section id="menu" class="py-20 px-4 bg-white">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center text-[#8B4513] mb-4">
                Nuestro Men√∫
            </h2>
            <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
                Explora nuestra selecci√≥n de platos preparados con ingredientes frescos y mucho cari√±o
            </p>
            
            <!-- Comidas R√°pidas -->
            <div class="mb-16">
                <h3 class="text-3xl font-bold text-[#D97757] mb-6 flex items-center">
                    <span class="mr-3">üçî</span> Comidas R√°pidas
                </h3>
                <div id="comidas-rapidas" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Los platos se cargar√°n din√°micamente aqu√≠ -->
                </div>
            </div>
            
            <!-- Almuerzos -->
            <div class="mb-16">
                <h3 class="text-3xl font-bold text-[#D97757] mb-6 flex items-center">
                    <span class="mr-3">üçΩÔ∏è</span> Almuerzos
                </h3>
                <div id="almuerzos" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Los platos se cargar√°n din√°micamente aqu√≠ -->
                </div>
            </div>
            
            <!-- Especiales -->
            <div class="mb-16">
                <h3 class="text-3xl font-bold text-[#D97757] mb-6 flex items-center">
                    <span class="mr-3">‚≠ê</span> Especiales del Chef
                </h3>
                <div id="especiales" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Los platos se cargar√°n din√°micamente aqu√≠ -->
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 3: GALER√çA -->
    <section id="galeria" class="py-20 px-4 bg-[#FFF8DC]">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center text-[#8B4513] mb-4">
                Galer√≠a de Momentos
            </h2>
            <p class="text-center text-gray-600 mb-12">
                Cada foto cuenta una historia de sabor y tradici√≥n
            </p>
            
            <div id="galeria-container" class="masonry">
                <!-- Las im√°genes se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 4: PROMOCIONES -->
    <section id="promociones" class="py-20 px-4 bg-gradient-to-br from-[#D97757] to-[#8B4513] text-white">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">
                üéâ Promociones Especiales
            </h2>
            
            <div id="promociones-container" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Las promociones se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 5: NUESTRA HISTORIA -->
    <section id="historia" class="py-20 px-4 bg-white">
        <div class="max-w-5xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div>
                    <img src="https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=800" 
                         alt="Familia cocinando" 
                         class="rounded-2xl shadow-2xl">
                </div>
                <div>
                    <h2 class="text-4xl md:text-5xl font-bold text-[#8B4513] mb-6">
                        Nuestra Historia
                    </h2>
                    <div class="space-y-4 text-gray-700 text-lg leading-relaxed">
                        <p>
                            Todo comenz√≥ en la cocina de la abuela Mar√≠a, donde las recetas se transmit√≠an 
                            de generaci√≥n en generaci√≥n, no con medidas exactas, sino con el coraz√≥n y la experiencia.
                        </p>
                        <p>
                            Hace m√°s de 30 a√±os, nuestra familia decidi√≥ compartir estos sabores aut√©nticos 
                            con la comunidad. Lo que empez√≥ como almuerzos para vecinos, se convirti√≥ en 
                            una tradici√≥n que hoy contin√∫a con la misma pasi√≥n y dedicaci√≥n.
                        </p>
                        <p>
                            Cada plato que preparamos lleva el amor y el cuidado que aprendimos en esa cocina 
                            familiar. Usamos ingredientes frescos, t√©cnicas artesanales y, sobre todo, 
                            ponemos el coraz√≥n en cada preparaci√≥n.
                        </p>
                        <p class="font-semibold text-[#D97757]">
                            "La comida casera no es solo nutrici√≥n, es un abrazo en cada bocado."
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 6: CONTACTO -->
    <section id="contacto" class="py-20 px-4 bg-[#FFF8DC]">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-[#8B4513] mb-6">
                ¬°Estamos Aqu√≠ Para Ti!
            </h2>
            <p class="text-xl text-gray-700 mb-10">
                Haz tu pedido o vis√≠tanos. Estaremos encantados de atenderte.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="card bg-white shadow-xl">
                    <div class="card-body items-center">
                        <div class="text-5xl mb-4">üì±</div>
                        <h3 class="card-title text-[#8B4513]">WhatsApp</h3>
                        <p>+57 300 123 4567</p>
                        <a href="https://wa.me/573001234567" class="btn whatsapp-btn text-white mt-4" target="_blank">
                            Chatear Ahora
                        </a>
                    </div>
                </div>
                
                <div class="card bg-white shadow-xl">
                    <div class="card-body items-center">
                        <div class="text-5xl mb-4">üìç</div>
                        <h3 class="card-title text-[#8B4513]">Ubicaci√≥n</h3>
                        <p>Cali, Valle del Cauca</p>
                        <p class="text-sm text-gray-600">Servicio a domicilio</p>
                    </div>
                </div>
                
                <div class="card bg-white shadow-xl">
                    <div class="card-body items-center">
                        <div class="text-5xl mb-4">üïê</div>
                        <h3 class="card-title text-[#8B4513]">Horarios</h3>
                        <p>Lun - S√°b: 11am - 8pm</p>
                        <p>Dom: 11am - 4pm</p>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-center gap-6 text-4xl">
                <a href="#" class="hover:scale-110 transition">üìò</a>
                <a href="#" class="hover:scale-110 transition">üì∑</a>
                <a href="#" class="hover:scale-110 transition">üê¶</a>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer footer-center p-10 bg-[#8B4513] text-white">
        <div>
            <p class="font-bold text-xl">
                Cocina Artesanal üç≥
            </p> 
            <p>Sabor casero desde 1990</p>
            <p>Copyright ¬© 2025 - Todos los derechos reservados</p>
        </div>
    </footer>

    <!-- JAVASCRIPT -->
    <script>
        // ==========================================
        // CONFIGURACI√ìN DE SUPABASE
        // ==========================================
        // ‚ö†Ô∏è IMPORTANTE: Reemplaza estas credenciales con las tuyas
        const SUPABASE_URL = 'TU_SUPABASE_URL_AQUI';
        const SUPABASE_KEY = 'TU_SUPABASE_ANON_KEY_AQUI';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // ==========================================
        // FUNCI√ìN: CARGAR PLATOS DEL MEN√ö
        // ==========================================
        async function cargarMenu() {
            try {
                // Obtener todos los platos de la tabla 'platos'
                const { data: platos, error } = await supabase
                    .from('platos')
                    .select('*')
                    .order('nombre', { ascending: true });

                if (error) throw error;

                // Separar platos por categor√≠a
                const comidasRapidas = platos.filter(p => p.categoria === 'comidas_rapidas');
                const almuerzos = platos.filter(p => p.categoria === 'almuerzos');
                const especiales = platos.filter(p => p.categoria === 'especiales');

                // Renderizar cada categor√≠a
                renderPlatos('comidas-rapidas', comidasRapidas);
                renderPlatos('almuerzos', almuerzos);
                renderPlatos('especiales', especiales);

            } catch (error) {
                console.error('Error cargando men√∫:', error);
            }
        }

        // Funci√≥n auxiliar para renderizar platos
        function renderPlatos(containerId, platos) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            platos.forEach(plato => {
                const whatsappMsg = `Hola! Quiero pedir: ${plato.nombre} - $${plato.precio.toLocaleString()}`;
                const whatsappUrl = `https://wa.me/573001234567?text=${encodeURIComponent(whatsappMsg)}`;
                
                const card = `
                    <div class="card bg-base-100 shadow-xl card-hover">
                        <figure class="h-64 overflow-hidden">
                            <img src="${plato.imagen_url || 'https://via.placeholder.com/400x300?text=Sin+Imagen'}" 
                                 alt="${plato.nombre}" 
                                 class="w-full h-full object-cover">
                        </figure>
                        <div class="card-body">
                            <h2 class="card-title text-[#8B4513]">${plato.nombre}</h2>
                            <p class="text-gray-600">${plato.descripcion}</p>
                            <div class="card-actions justify-between items-center mt-4">
                                <span class="text-2xl font-bold text-[#D97757]">
                                    $${plato.precio.toLocaleString()}
                                </span>
                                <a href="${whatsappUrl}" 
                                   class="btn whatsapp-btn text-white" 
                                   target="_blank">
                                    Pedir üõí
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }

        // ==========================================
        // FUNCI√ìN: CARGAR GALER√çA DE FOTOS
        // ==========================================
        async function cargarGaleria() {
            try {
                // Obtener lista de archivos del bucket 'galeria'
                const { data: files, error } = await supabase
                    .storage
                    .from('galeria')
                    .list('', {
                        limit: 50,
                        sortBy: { column: 'created_at', order: 'desc' }
                    });

                if (error) throw error;

                const container = document.getElementById('galeria-container');
                container.innerHTML = '';

                files.forEach(file => {
                    // Obtener URL p√∫blica de cada imagen
                    const { data } = supabase.storage
                        .from('galeria')
                        .getPublicUrl(file.name);

                    const imgHtml = `
                        <div class="masonry-item">
                            <img src="${data.publicUrl}" 
                                 alt="Galer√≠a" 
                                 class="w-full rounded-lg shadow-lg hover:shadow-2xl transition cursor-pointer"
                                 onclick="window.open('${data.publicUrl}', '_blank')">
                        </div>
                    `;
                    container.innerHTML += imgHtml;
                });

            } catch (error) {
                console.error('Error cargando galer√≠a:', error);
            }
        }

        // ==========================================
        // FUNCI√ìN: CARGAR PROMOCIONES
        // ==========================================
        async function cargarPromociones() {
            try {
                const { data: promociones, error } = await supabase
                    .from('promociones')
                    .select('*')
                    .eq('activa', true)
                    .order('orden', { ascending: true });

                if (error) throw error;

                const container = document.getElementById('promociones-container');
                container.innerHTML = '';

                promociones.forEach(promo => {
                    const card = `
                        <div class="card bg-white/10 backdrop-blur-lg shadow-2xl">
                            <div class="card-body">
                                <h3 class="card-title text-2xl text-white">${promo.titulo}</h3>
                                <p class="text-white/90 text-lg">${promo.descripcion}</p>
                                ${promo.precio ? `
                                    <div class="badge badge-lg bg-yellow-400 text-[#8B4513] font-bold">
                                        $${promo.precio.toLocaleString()}
                                    </div>
                                ` : ''}
                                ${promo.horario ? `
                                    <p class="text-white/80 mt-2">
                                        üïê ${promo.horario}
                                    </p>
                                ` : ''}
                            </div>
                        </div>
                    `;
                    container.innerHTML += card;
                });

            } catch (error) {
                console.error('Error cargando promociones:', error);
            }
        }

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        // Cargar todo cuando la p√°gina est√© lista
        document.addEventListener('DOMContentLoaded', () => {
            cargarMenu();
            cargarGaleria();
            cargarPromociones();
        });

        // Smooth scroll para los enlaces del men√∫
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>
